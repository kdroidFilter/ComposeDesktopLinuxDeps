# ğŸ“¦ Compose Desktop Linux Package Deps (DEB)

Small Gradle plugin for **Compose Desktop** that automatically adds Debian **`Depends:`** to the `.deb` generated by **jpackage**.
Can write `StartupWMClass` into `.desktop` files to fix dock/taskbar icons (fixes [JBR-9114](https://youtrack.jetbrains.com/issue/JBR-9114)).

## ğŸ›  Requirements

* ğŸ§ Debian/Ubuntu build env with `dpkg-deb` â†’ `sudo apt-get install dpkg-dev`
* ğŸ’» Using Compose Multiplatform packaging (`packageDeb` / `packageReleaseDeb`)

## ğŸš€ Quick start

```kotlin
// build.gradle.kts
plugins {
    id("io.github.kdroidfilter.compose.linux.packagedeps") version "<version>"
}

linuxDebConfig {
    debDepends.set(listOf("libqt5widgets5t64", "libx11-6"))
    startupWMClass.set("MainClassKt")
}
```

Build as usual:

```bash
./gradlew packageDeb
# or
./gradlew packageReleaseDeb
```

## âš™ï¸ What it does

* ğŸ” Finds the jpackage-generated `.deb`
* â• Adds/merges a `Depends:` line in `DEBIAN/control` (de-duplicates)
* ğŸ–Š Writes `StartupWMClass=` into `.desktop` files if configured
* ğŸ“¦ Rebuilds the `.deb`

## ğŸ Troubleshooting

* âŒ **`dpkg-deb not found`** â†’ `sudo apt-get install dpkg-dev`
* ğŸ“‚ **No `.deb` found** â†’ run `./gradlew packageDeb` first
* ğŸ–¼ **Dock icon not matching** â†’ set `startupWMClass` (e.g., `"MainClassKt"`)

## ğŸ“œ License

MIT â€” see `LICENSE`.
